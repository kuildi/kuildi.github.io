{"version":3,"sources":["components/point-card/point-card.module.css","components/app/app.module.css","components/input-filed/input-field.module.css","components/points-list/points-list.module.css","icons/close.svg","services/actions/constants.js","components/input-filed/input-field.js","components/point-card/point-card.js","components/points-list/points-list.js","components/map/map.js","components/app/app.js","services/reducers/index.js","services/reducers/root-reducer.js","services/store.js","index.js"],"names":["module","exports","_path","ADD_POINT","REMOVE_POINT","UPDATE_POINTS","DRAG_SORT","InputField","dispatch","useDispatch","inputRef","useRef","ref","onKeyDown","e","code","current","value","trim","length","type","point","text","pointKey","getRandomNum","className","InputStyles","input_field","placeholder","_excluded","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgClose","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","id","d","ForwardRef","PointCard","useDrop","accept","hover","item","monitor","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","useDrag","collect","isDragging","opacity","drag","CardStyles","point_card","style","button","onClick","PointsList","points","useSelector","store","pathPoints","pointsCards","map","ListStyles","points_list","MapComponent","useState","ymaps","setYmaps","routes","query","apikey","modules","onLoad","state","center","zoom","controls","instanceRef","refPoints","forEach","push","MyBalloonLayout","templateLayoutFactory","createClass","multiRoute","multiRouter","MultiRoute","referencePoints","params","results","balloonPanelMaxMapArea","wayPointDraggable","viaPointDraggable","routeActiveStrokeWidth","routeActiveStrokeColor","geoObjects","removeAll","add","events","newPoints","getWayPoints","geoObjArr","toArray","setCenter","geometry","getCoordinates","each","geoObject","addon","balloon","get","options","set","balloonContentLayout","properties","_data","request","geocode","then","res","newContent","payload","getRoute","App","styles","main_container","DndProvider","backend","HTML5Backend","initialState","rootReducer","combineReducers","action","filter","newPointsArr","indexTo","find","indexFrom","dragItem","splice","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f50c765b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"point_card\":\"point-card_point_card__8zYRr\",\"button\":\"point-card_button__3iuqs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_container\":\"app_main_container__1QyZO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input_field\":\"input-field_input_field__1clSi\",\"search_icon\":\"input-field_search_icon__1Fl_r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"points_list\":\"points-list_points_list__30gOp\"};","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.22566 4.81096C5.83514 4.42044 5.20197 4.42044 4.81145 4.81096C4.42092 5.20148 4.42092 5.83465 4.81145 6.22517L10.5862 11.9999L4.81151 17.7746C4.42098 18.1651 4.42098 18.7983 4.81151 19.1888C5.20203 19.5793 5.8352 19.5793 6.22572 19.1888L12.0004 13.4141L17.7751 19.1888C18.1656 19.5793 18.7988 19.5793 19.1893 19.1888C19.5798 18.7983 19.5798 18.1651 19.1893 17.7746L13.4146 11.9999L19.1893 6.22517C19.5799 5.83465 19.5799 5.20148 19.1893 4.81096C18.7988 4.42044 18.1657 4.42044 17.7751 4.81096L12.0004 10.5857L6.22566 4.81096Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.f605f3da.svg\";\nexport { ForwardRef as ReactComponent };","export const API_KEY = 'a0e8948c-f788-417c-a0c3-b2b3f1b9408a';\r\n\r\nexport const ADD_POINT = 'ADD_POINT';\r\nexport const REMOVE_POINT = 'REMOVE_POINT';\r\nexport const UPDATE_POINTS = 'UPDATE_POINTS';\r\nexport const DRAG_SORT = 'DRAG_SORT';","import React, { useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { getRandomNum } from '@funboxteam/diamonds';\r\n\r\nimport { ADD_POINT } from '../../services/actions/constants';\r\nimport InputStyles from './input-field.module.css';\r\n\r\nconst InputField = () => {\r\n    const dispatch = useDispatch();\r\n    const inputRef = useRef(null);\r\n\r\n    const addPoint = (e) => {\r\n        if (e.code === 'Enter' && inputRef.current.value  && inputRef.current.value.trim().length) {\r\n            dispatch({\r\n                type: ADD_POINT,\r\n                point: {\r\n                    text: inputRef.current.value,\r\n                    pointKey: getRandomNum(1, 200) //Сгенерируем уникальный ключ, \r\n                                                   //который поможет при drag-n-drop и удалении точки\r\n                }\r\n            })\r\n            inputRef.current.value = '';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <input\r\n                ref={inputRef}\r\n                onKeyDown={addPoint}\r\n                type='text'\r\n                className={InputStyles.input_field}\r\n                placeholder='Введите адрес'\r\n            ></input>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default InputField;","import React, { useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\n\r\nimport CardStyles from './point-card.module.css';\r\nimport { ReactComponent as RemoveIcon } from '../../icons/close.svg';\r\nimport { REMOVE_POINT, DRAG_SORT } from '../../services/actions/constants';\r\n\r\nconst PointCard = (props) => {\r\n    const dispatch = useDispatch();\r\n    const ref = useRef(null);\r\n\r\n    const removePoint = (pointKey) => {\r\n        dispatch({\r\n            type: REMOVE_POINT,\r\n            key: pointKey\r\n        })\r\n    }\r\n\r\n    const [, drop] = useDrop({\r\n        accept: 'DRAG_POINT',\r\n        hover(item, monitor) {\r\n            if (!ref.current) {\r\n                return;\r\n            }\r\n            const dragIndex = item.pointKey;\r\n            const hoverIndex = props.pointKey;\r\n\r\n            if (dragIndex === hoverIndex) {\r\n                return;\r\n            }\r\n\r\n            const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n            const clientOffset = monitor.getClientOffset();\r\n            const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n\r\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n                return;\r\n            }\r\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n                return;\r\n            }\r\n\r\n            dispatch({\r\n                type: DRAG_SORT,\r\n                dragIndex: dragIndex,\r\n                hoverIndex: hoverIndex\r\n            })\r\n        }\r\n    });\r\n    const [{ isDragging }, drag] = useDrag({\r\n        type: 'DRAG_POINT',\r\n        item: { ...props },\r\n        collect: (monitor) => ({\r\n            isDragging: monitor.isDragging(),\r\n        })\r\n    });\r\n\r\n    const opacity = isDragging ? 0.5 : 1;\r\n    drag(drop(ref));\r\n\r\n    return (\r\n        <li ref={ref} className={CardStyles.point_card} style={{ opacity }}>\r\n            <p title={props.text}>{props.text}</p>\r\n            <button\r\n                className={CardStyles.button}\r\n                title='Удалить точку'\r\n                onClick={() => removePoint(props.pointKey)}\r\n            >\r\n                <RemoveIcon />\r\n            </button>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default PointCard;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport ListStyles from './points-list.module.css'\r\nimport PointCard  from '../point-card/point-card';\r\n\r\nconst PointsList = () => {\r\n    const points = useSelector(store => store.pathPoints.points);\r\n\r\n    const pointsCards = points.map(item =>\r\n        <PointCard key={item.pointKey} {...item} />\r\n    )\r\n\r\n    return (\r\n        <ul className={ListStyles.points_list}>\r\n            {pointsCards}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default PointsList;","import React, { useState, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { YMaps, Map } from 'react-yandex-maps';\r\n\r\nimport { API_KEY, UPDATE_POINTS } from '../../services/actions/constants';\r\n\r\nconst MapComponent = () => {\r\n    const dispatch = useDispatch();\r\n    const points = useSelector(store => store.pathPoints.points);\r\n\r\n    const mapState = { center: [55.750625, 37.626], zoom: 7, controls: [] };\r\n    const [ymaps, setYmaps] = useState(null);\r\n    const routes = useRef(null);\r\n\r\n    const getRoute = ref => {\r\n        if (ymaps) {\r\n            let refPoints = [];\r\n            points.forEach(item => refPoints.push(item.text));\r\n\r\n            const MyBalloonLayout = ymaps.templateLayoutFactory.createClass(\r\n                \"<div class='popover top'>\" +\r\n                \"<div class='popover-inner'>\" +\r\n                \"$[properties.request]\" +\r\n                \"</div>\" +\r\n                \"</div>\"\r\n            );\r\n\r\n            const multiRoute = new ymaps.multiRouter.MultiRoute(\r\n                {\r\n                    referencePoints: refPoints,\r\n                    params: {\r\n                        results: 2\r\n                    }\r\n                },\r\n                {\r\n                    balloonPanelMaxMapArea: 0,\r\n                    wayPointDraggable: true,\r\n                    viaPointDraggable: true,\r\n                    routeActiveStrokeWidth: 6,\r\n                    routeActiveStrokeColor: \"#fa6600\"\r\n                }\r\n            );\r\n\r\n\r\n            routes.current = multiRoute;\r\n            ref.geoObjects.removeAll();\r\n            ref.geoObjects.add(multiRoute);\r\n\r\n            multiRoute.events.add('update', () => {\r\n                let newPoints = multiRoute.getWayPoints();\r\n                let geoObjArr = newPoints.toArray();\r\n\r\n                // Выставим центр карты по координатам последней точки\r\n                ref.setCenter(geoObjArr[geoObjArr.length - 1].geometry.getCoordinates());\r\n\r\n                newPoints.each((item, i) => {\r\n                    // Добавим кастомный балун для каждой точки\r\n                    ymaps.geoObject.addon.balloon.get(item);\r\n                    item.options.set({\r\n                        balloonContentLayout: MyBalloonLayout\r\n                    });\r\n\r\n                    // После драга точки на карте, поле request содержит массив координат\r\n                    // Воспользуемся geocode что бы вернуть новое название точки\r\n                    if (typeof item.properties._data.request != 'string') {\r\n                        ymaps.geocode(item.geometry.getCoordinates(), {\r\n                            results: 1\r\n                        }).then(res => {\r\n                            let newContent = res.geoObjects.get(0) ?\r\n                                res.geoObjects.get(0).properties.get('text') :\r\n                                'Не удалось определить адрес.';\r\n\r\n                            // Обновим text соответствующего объекта в оригинальном массиве\r\n                            points[i].text = newContent;\r\n\r\n                            // Задаем новое содержимое балуна\r\n                            item.options.set({\r\n                                balloonContentLayout: ymaps.templateLayoutFactory.createClass(\r\n                                    \"<div class='popover top'>\" +\r\n                                    \"<div class='popover-inner'>\" +\r\n                                    newContent +\r\n                                    \"</div>\" +\r\n                                    \"</div>\"\r\n                                )\r\n                            });\r\n                            dispatch({\r\n                                type: UPDATE_POINTS,\r\n                                payload: points\r\n                            })\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    return (\r\n        <YMaps query={{ apikey: API_KEY }}>\r\n            <Map\r\n                modules={[\r\n                    \"multiRouter.MultiRoute\",\r\n                    \"geoObject.addon.balloon\",\r\n                    \"templateLayoutFactory\",\r\n                    \"geocode\"\r\n                ]}\r\n                onLoad={ymaps => setYmaps(ymaps)}\r\n                state={mapState}\r\n                instanceRef={ref => ref && getRoute(ref)}\r\n                width=\"100%\" height=\"100%\"\r\n            />\r\n        </YMaps>\r\n    )\r\n}\r\n\r\nexport default MapComponent;","import React from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport styles from './app.module.css';\nimport InputField from '../input-filed/input-field';\nimport PointsList from '../points-list/points-list';\nimport MapComponent from '../map/map';\n\nfunction App() {\n\n  return (\n    <main className={styles.main_container}>\n      <section>\n        <InputField />\n        <DndProvider backend={HTML5Backend}>\n          <PointsList />\n        </DndProvider>\n      </section>\n      <MapComponent />\n    </main>\n  );\n}\n\nexport default App;\n","import {\r\n    ADD_POINT,\r\n    REMOVE_POINT,\r\n    DRAG_SORT,\r\n    UPDATE_POINTS\r\n} from \"../actions/constants\";\r\n\r\nconst initialState = {\r\n    points: []\r\n}\r\n\r\nexport const pathPoints = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_POINT: {\r\n            return {\r\n                ...state,\r\n                points: [...state.points, action.point]\r\n            };\r\n        }\r\n        case REMOVE_POINT: {\r\n            return {\r\n                ...state,\r\n                points: [...state.points].filter(item => item.pointKey !== action.key)\r\n            };\r\n        }\r\n        case UPDATE_POINTS: {\r\n            const newPointsArr = action.payload;\r\n\r\n            return {\r\n                ...state,\r\n                points: [...newPointsArr]\r\n            };\r\n        }\r\n        case DRAG_SORT: {\r\n            const newPointsArr = [...state.points];\r\n            const indexTo = newPointsArr.indexOf(newPointsArr.find(item => item.pointKey === action.hoverIndex));\r\n            const indexFrom = newPointsArr.indexOf(newPointsArr.find(item => item.pointKey === action.dragIndex));\r\n            const dragItem = newPointsArr[indexFrom];\r\n\r\n            // Удалим перетаскиваемый элемент и вставим его на нужную позицию\r\n            newPointsArr.splice(indexFrom, 1);\r\n            newPointsArr.splice(indexTo, 0, dragItem);\r\n\r\n            return {\r\n                ...state,\r\n                points: newPointsArr\r\n            }\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}","import { combineReducers } from \"redux\";\r\nimport { pathPoints } from \".\";\r\n\r\nexport const rootReducer = combineReducers({\r\n    pathPoints: pathPoints\r\n});","import { compose, createStore } from 'redux';\r\nimport { rootReducer } from './reducers/root-reducer';\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers();\r\n\r\nexport const store = createStore(rootReducer, enhancer);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport './index.css';\nimport App from './components/app/app';\nimport { store } from './services/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}