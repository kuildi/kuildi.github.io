(this["webpackJsonpmap-app"]=this["webpackJsonpmap-app"]||[]).push([[0],{22:function(t,e,n){t.exports={point_card:"point-card_point_card__8zYRr",button:"point-card_button__3iuqs"}},27:function(t,e,n){t.exports={main_container:"app_main_container__1QyZO"}},28:function(t,e,n){t.exports={input_field:"input-field_input_field__1clSi",search_icon:"input-field_search_icon__1Fl_r"}},29:function(t,e,n){t.exports={points_list:"points-list_points_list__30gOp"}},44:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var r,o=n(0),i=n.n(o),a=n(14),c=n.n(a),s=n(6),l=(n(44),n(53)),u=n(31),p=n(27),b=n.n(p),O=n(51),d="ADD_POINT",j="REMOVE_POINT",f="UPDATE_POINTS",v="DRAG_SORT",g=n(28),_=n.n(g),y=n(2),h=function(){var t=Object(s.b)(),e=Object(o.useRef)(null);return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("input",{ref:e,onKeyDown:function(n){"Enter"===n.code&&e.current.value&&e.current.value.trim().length&&(t({type:d,point:{text:e.current.value,pointKey:Object(O.a)(1,200)}}),e.current.value="")},type:"text",className:_.a.input_field,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"})})},x=n(4),m=n(29),w=n.n(m),C=n(12),E=n(55),P=n(54),R=n(22),D=n.n(R),L=["title","titleId"];function I(){return I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I.apply(this,arguments)}function S(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function N(t,e){var n=t.title,i=t.titleId,a=S(t,L);return o.createElement("svg",I({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},a),n?o.createElement("title",{id:i},n):null,r||(r=o.createElement("path",{d:"M6.22566 4.81096C5.83514 4.42044 5.20197 4.42044 4.81145 4.81096C4.42092 5.20148 4.42092 5.83465 4.81145 6.22517L10.5862 11.9999L4.81151 17.7746C4.42098 18.1651 4.42098 18.7983 4.81151 19.1888C5.20203 19.5793 5.8352 19.5793 6.22572 19.1888L12.0004 13.4141L17.7751 19.1888C18.1656 19.5793 18.7988 19.5793 19.1893 19.1888C19.5798 18.7983 19.5798 18.1651 19.1893 17.7746L13.4146 11.9999L19.1893 6.22517C19.5799 5.83465 19.5799 5.20148 19.1893 4.81096C18.7988 4.42044 18.1657 4.42044 17.7751 4.81096L12.0004 10.5857L6.22566 4.81096Z",fill:"black"})))}var k=o.forwardRef(N),T=(n.p,function(t){var e=Object(s.b)(),n=Object(o.useRef)(null),r=Object(E.a)({accept:"DRAG_POINT",hover:function(r,o){var i;if(n.current){var a=r.pointKey,c=t.pointKey;if(a!==c){var s=null===(i=n.current)||void 0===i?void 0:i.getBoundingClientRect(),l=(s.bottom-s.top)/2,u=o.getClientOffset().y-s.top;a<c&&u<l||a>c&&u>l||e({type:v,dragIndex:a,hoverIndex:c})}}}}),i=Object(C.a)(r,2)[1],a=Object(P.a)({type:"DRAG_POINT",item:Object(x.a)({},t),collect:function(t){return{isDragging:t.isDragging()}}}),c=Object(C.a)(a,2),l=c[0].isDragging?.5:1;return(0,c[1])(i(n)),Object(y.jsxs)("li",{ref:n,className:D.a.point_card,style:{opacity:l},children:[Object(y.jsx)("p",{title:t.text,children:t.text}),Object(y.jsx)("button",{className:D.a.button,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0447\u043a\u0443",onClick:function(){return n=t.pointKey,void e({type:j,key:n});var n},children:Object(y.jsx)(k,{})})]})}),A=function(){var t=Object(s.c)((function(t){return t.pathPoints.points})),e=t.map((function(t){return Object(y.jsx)(T,Object(x.a)({},t),t.pointKey)}));return Object(y.jsx)("ul",{className:w.a.points_list,children:e})},K=n(24),M=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.pathPoints.points})),n=Object(o.useState)(null),r=Object(C.a)(n,2),i=r[0],a=r[1],c=Object(o.useRef)(null);return Object(y.jsx)(K.b,{query:{apikey:"a0e8948c-f788-417c-a0c3-b2b3f1b9408a"},children:Object(y.jsx)(K.a,{modules:["multiRouter.MultiRoute","geoObject.addon.balloon","templateLayoutFactory","geocode"],onLoad:function(t){return a(t)},state:{center:[55.750625,37.626],zoom:7,controls:[]},instanceRef:function(n){return n&&function(n){if(i){var r=[];e.forEach((function(t){return r.push(t.text)}));var o=i.templateLayoutFactory.createClass("<div class='popover top'><div class='popover-inner'>$[properties.request]</div></div>"),a=new i.multiRouter.MultiRoute({referencePoints:r,params:{results:2}},{balloonPanelMaxMapArea:0,wayPointDraggable:!0,viaPointDraggable:!0,routeActiveStrokeWidth:6,routeActiveStrokeColor:"#fa6600"});c.current=a,n.geoObjects.removeAll(),n.geoObjects.add(a),a.events.add("update",(function(){var r=a.getWayPoints(),c=r.toArray();n.setCenter(c[c.length-1].geometry.getCoordinates()),r.each((function(n,r){i.geoObject.addon.balloon.get(n),n.options.set({balloonContentLayout:o}),"string"!=typeof n.properties._data.request&&i.geocode(n.geometry.getCoordinates(),{results:1}).then((function(o){var a=o.geoObjects.get(0)?o.geoObjects.get(0).properties.get("text"):"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441.";e[r].text=a,n.options.set({balloonContentLayout:i.templateLayoutFactory.createClass("<div class='popover top'><div class='popover-inner'>"+a+"</div></div>")}),t({type:f,payload:e})}))}))}))}}(n)},width:"100%",height:"100%"})})};var F=function(){return Object(y.jsxs)("main",{className:b.a.main_container,children:[Object(y.jsxs)("section",{children:[Object(y.jsx)(h,{}),Object(y.jsx)(l.a,{backend:u.a,children:Object(y.jsx)(A,{})})]}),Object(y.jsx)(M,{})]})},q=n(7),X=n(13),B={points:[]},G=Object(q.a)({pathPoints:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return Object(x.a)(Object(x.a)({},t),{},{points:[].concat(Object(X.a)(t.points),[e.point])});case j:return Object(x.a)(Object(x.a)({},t),{},{points:Object(X.a)(t.points).filter((function(t){return t.pointKey!==e.key}))});case f:var n=e.payload;return Object(x.a)(Object(x.a)({},t),{},{points:Object(X.a)(n)});case v:var r=Object(X.a)(t.points),o=r.indexOf(r.find((function(t){return t.pointKey===e.hoverIndex}))),i=r.indexOf(r.find((function(t){return t.pointKey===e.dragIndex}))),a=r[i];return r.splice(i,1),r.splice(o,0,a),Object(x.a)(Object(x.a)({},t),{},{points:r});default:return t}}}),U=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):q.b)(),V=Object(q.c)(G,U);c.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(s.a,{store:V,children:Object(y.jsx)(F,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.f50c765b.chunk.js.map